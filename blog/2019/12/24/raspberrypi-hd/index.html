<!doctype html><html lang=en-us><head><script type=text/javascript>var userLang=navigator.language||navigator.userLanguage;console.log(window.location.pathname),userLang.startsWith("zh")&&window.location.pathname=="/"&&(window.location.href="/zh/")</script><script type=text/javascript src=//downloads.mailchimp.com/js/signup-forms/popup/unique-methods/embed.js data-dojo-config="usePlainJson: true, isDebug: false"></script><script type=text/javascript>window.dojoRequire(["mojo/signup-forms/Loader"],function(e){e.start({baseUrl:"mc.us4.list-manage.com",uuid:"6ace4137554cb923d96ec92c7",lid:"36ce78d7a8",uniqueMethods:!0})})</script>
<script async src=https://cdn.splitbee.io/sb.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Setup Lomorage secondary backup with Raspberry Pi | Lomorage</title><link href="https://fonts.googleapis.com/css?family=Lato:400" rel=stylesheet><script defer src=https://use.fontawesome.com/releases/v5.15.3/js/all.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-138235951-1","auto"),ga("send","pageview"))</script><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.8.1/css/all.css integrity=sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf crossorigin=anonymous><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel="shortcut icon" href=/img/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=stylesheet type=text/css href=/css/style.a2d4ddf024fd938e5bbbf2d62c2f17987b805f53b4cc89d360109c27d51e9458.min.css></head><body><div class="navbar navbar--extended"><nav class=nav__mobile></nav><div class=container><div class=navbar__inner><a href=/ class=navbar__logo>Lomorage</a><nav class=navbar__menu><ul><li><a href=/>Home</a></li><li><a href=https://lomosw.lomorage.com/en/index.html class="button button__accent">Download Now</a></li><li><a href=/survey/>Survey</a></li><li><a href=/faq/>FAQ</a></li><li><a href=/blog/>Blog</a></li><li><a href=/contact/>Contact</a></li></ul></nav><div class=navbar__menu-mob><a href id=toggle><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837.0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163.0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837.0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837.0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837.0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837.0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></a></div></div></div></div><div class=page__header><div class="hero__overlay hero__overlay--gradient"></div><div class=hero__mask></div><div class=page__header__inner><div class=container><div class=page__header__content><div class=page__header__content__inner id=navConverter><h1 class=page__header__title>Setup Lomorage secondary backup with Raspberry Pi</h1></div></div></div></div></div><div class=page><div class=container><div class=page__inner><div class=page__main><div class=text-container><p>Photos and video are valuable assets, having a single backup is not enough, we at least should have secondary backup besides the primary backup, and ideally one more remote backup. Lomorage currently provide the option to setup a secondary backup. There are several options to do this.</p><h1 id=table-of-contents>Table of Contents</h1><ul><li><a href=#setup-lomorage-secondary-backup-with-raspberry-pi>Setup Lomorage secondary backup with Raspberry Pi</a><ul><li><a href=#option-1-1-usb-hard-drive-1-usb-flash-drive-on-same-raspberry-pi>Option 1 (1 USB hard drive, 1 USB flash drive on same Raspberry Pi)</a></li><li><a href=#option-2-2-usb-hard-drive-on-same-raspberry-pi>Option 2 (2 USB hard drive on same Raspberry Pi)</a></li><li><a href=#option-3-2-usb-hard-drive-on-2-separate-raspberry-pis>Option 3 (2 USB hard drive on 2 separate Raspberry Pis)</a></li><li><a href=#option-4-1-usb-drive-one-raspberry-pi-nas>Option 4 (1 USB drive one Raspberry Pi, NAS)</a></li></ul></li><li><a href=#restore-from-the-secondary-backup>Restore from the secondary backup</a></li></ul><h1 id=setup-lomorage-secondary-backup-with-raspberry-pi>Setup Lomorage secondary backup with Raspberry Pi</h1><p>You can choose the option suits your need.</p><h2 id=option-1-1-usb-hard-drive-1-usb-flash-drive-on-same-raspberry-pi>Option 1 (1 USB hard drive, 1 USB flash drive on same Raspberry Pi)</h2><p>Raspberry Pi should have no problem to power one USB hard drive, you can even add one more USB flash drive. Since normally, a hard drive is expected to have <a href=https://www.datanumen.com/blogs/usb-flash-drive-vs-external-hard-drive-better-storing-data/>a much longer lifespan</a>, and USB flash drive has <a href=https://www.flashbay.com/blog/usb-life-expectancy>limited number of write/erase cycles</a>, it&rsquo;s better to use hard drive as the primary storage and USB hard drive.</p><h2 id=option-2-2-usb-hard-drive-on-same-raspberry-pi>Option 2 (2 USB hard drive on same Raspberry Pi)</h2><p>Most likely, Raspberry Pi won&rsquo;t be able to provide that much power two USB hard drives. You can use the USB hub with power supply, which means the USB hard drive will be powered by the USB hub instead of Raspberry Pi.</p><ul><li><p><a href=https://www.walmart.com/ip/Plugable-USB-Hub-USB-2-0-7-Port-15W/134245816>USB 2.0 7-Port Hub with 15W Power Adapter from Plugable Technologies</a></p></li><li><p><a href=https://www.adafruit.com/product/961>USB 2.0 Powered Hub - 7 Ports with 5V 2A Power Supply</a></p></li></ul><h2 id=option-3-2-usb-hard-drive-on-2-separate-raspberry-pis>Option 3 (2 USB hard drive on 2 separate Raspberry Pis)</h2><p>It would be safer if you have two setups in different places, the Lomorage OS image already enabled Samba file share service by default, so what you can do it&rsquo;s actually mount the hard drive of the secondary setup in the the first setup.</p><p>For example, if secondary Pi has ip &ldquo;192.168.1.155&rdquo;, the driver is mount at &ldquo;/media/WD_90C27F73C27F5C82&rdquo;.</p><p>One the primary Pi, we can use the following command to mount it, just change the ip address and mount directory according to your setup.</p><pre tabindex=0><code>mkdir /media/WD_90C27F73C27F5C82

# user pass is the username password on 2nd Pi, that is the default.
# uid 1000 and gid 1000 is for mount it as user Pi on 1st Pi
sudo mount.cifs //192.168.1.155/media/WD_90C27F73C27F5C82 /media/WD_90C27F73C27F5C82 -o user=pi,pass=raspberry,uid=1000,gid=1000
</code></pre><p>You can also add the entry in &ldquo;/etc/fstab&rdquo;, so that it can mount when system start:</p><pre tabindex=0><code>//192.168.1.155/media/WD_90C27F73C27F5C82  /media/WD_90C27F73C27F5C82  cifs  user=pi,pass=raspberry,uid=1000,gid=1000
</code></pre><p>You can use the following command to umount and mount all entries in fstab to validate the configuration:</p><pre tabindex=0><code>sudo mount -a
sudo umount -a
</code></pre><p><strong>Notice: Don&rsquo;t use the secondary Lomorage service even though it can be found, since we are using the primary one and set redundancy backup to the directory mounted via Samba. Currently we don&rsquo;t have GUI to set the backup this way, you have to do that manually in commandline, will add GUI later</strong></p><h2 id=option-4-1-usb-drive-one-raspberry-pi-nas>Option 4 (1 USB drive one Raspberry Pi, NAS)</h2><p>You can also reuse your NAS and follow the similar steps above in Option 3 to mount the NAS storage via Samba.</p><p>The parameters needed are:</p><ul><li><p>samba service ip (192.168.1.155)</p></li><li><p>samba shared directory name (WD_90C27F73C27F5C82)</p></li><li><p>local mount root directory (on Raspberry Pi is &ldquo;/media&rdquo; if using Lomorage OS image; If not, it and can be changed via &ldquo;&ndash;mount-dir&rdquo; command line args when running lomod;)</p></li><li><p>username/password for Samba service</p></li></ul><h1 id=restore-from-the-secondary-backup>Restore from the secondary backup</h1><p>If unfortunately the hard drive on your primary device is dead, you can bring up the secondary setup as primary one. The photo and video assets are already backup on the secondary hard drive, as well as the database. You can copy the &ldquo;assets.db&rdquo; in the user directory on hard drive to &ldquo;/opt/lomorage/var/assets.db&rdquo;, and change the &ldquo;home_dir&rdquo; in table &ldquo;user&rdquo; for each user in &ldquo;assets.db&rdquo;. We promise will let this process less painful, but for now, you have to do that manually, if you have the problem and can&rsquo;t figure it by yourself, join our <a href=https://join.slack.com/t/lomorage/shared_invite/enQtODc4MTE5ODQzNzkyLTRlY2U4MTQ1YjczYjBhMDcwMmExYTUxNTg2NTE5YmRkZjg2ZWQwZjg1MjEwMjQzZWVjMmEwZjk3ZGIyODY4ODM>slack channel</a> or reach us via [email](mailto: <a href=mailto:support@lomorage.com>support@lomorage.com</a>), and we will help you solve it.</p></div><div id=comments><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//lomorage.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div></div></div><div class="footer footer--dark"><div class=container><div class=footer__inner><a href=/ class=footer__textLogo>Lomorage</a><div class=footer__data><div class=footer__data__item><div class=footer__row><a href=https://github.com/lomorage/homepage target=_blank style=opacity:1><i class="fab fa-2x fa-github"></i></a></div></div><div class=footer__data__item><div class=footer__row><a href=https://join.slack.com/t/lomorage/shared_invite/enQtODc4MTE5ODQzNzkyLTRlY2U4MTQ1YjczYjBhMDcwMmExYTUxNTg2NTE5YmRkZjg2ZWQwZjg1MjEwMjQzZWVjMmEwZjk3ZGIyODY4ODM target=_blank style=opacity:1><i class="fab fa-2x fa-slack"></i></a></div></div><div class=footer__data__item><div class=footer__row><a href=mailto:support@lomorage.com target=_blank style=opacity:1><i class="fa fa-2x fa-envelope"></i></a></div></div></div></div><div class=footer__inner></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://unpkg.com/ionicons@4.4.7/dist/ionicons.js></script><div class=scripts><script type=text/javascript src=/js/scripts.min.9053fcd281dbad2496be1f70a974c21f5dafd1e8f33d29fcbce97a0fc6fa3a6b.js></script></div></body></html>